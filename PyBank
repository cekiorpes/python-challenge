#Modules
import os
import csv

#Lists
Date = []
Profit_Losses = []
IntPL= []

#Set path for file
PyBankpath = os.path.join("..","PyBank","Resources","budget_data.csv")

#Open the csv file
with open(PyBankpath) as csvfile:
    csvreader = csv.reader(csvfile, delimiter=",")
    csv_header = next(csvreader)

    for row in csvreader:
        Date.append(row[0])
        Profit_Losses.append(row[1])

        #Make items in Profit/Losses list integers
        Profit_Losses= [int(item) for item in Profit_Losses]

    #Find number of months
    months = (len(Date))
    print(f'Total Months:{(months)}')

    #Net profit/losses - add up profit/losses in row [1]    
    NetTotal = sum(Profit_Losses)
    print(f'Total: ${NetTotal}')

    #Calculate Average Change (total change in profits/change in months)
    AvgChange = (Profit_Losses[85] - Profit_Losses[0])/(months-1)
    print(f'Average Change: ${AvgChange:.2f}')

    #Find the greatest increase and greatest decrease
    ProfitChange = []
    for i in range (1, len(Profit_Losses)):
        ProfitChange.append(Profit_Losses[i]-Profit_Losses[i-1])
        GreatestIncrease = max(ProfitChange)
        GreatestDecrease = min(ProfitChange)
    
    GreatestIncrease_index = ProfitChange.index(GreatestIncrease)
    GreatestDecrease_index = ProfitChange.index(GreatestDecrease)
    print(Date[GreatestIncrease_index +1])
    print(Date[GreatestDecrease_index +1])
    print(GreatestIncrease)
    print(GreatestDecrease)
